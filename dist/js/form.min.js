var BOSPACE=window.$$=BOSPACE||{};BOSPACE.eventCenter={space:{},addEventListener:function(e,t){var r=this.space;t&&(r[e]?r[e].push(t):r[e]=[t])},fire:function(e){var t=this.space,r=Array.prototype.slice.call(arguments,1),n=t[e];if(n&&n.length)for(var i=0,a=n.length;a>i;i++)n[i].apply(n[i],r)}};var BOSPACE=window.$$=BOSPACE||{};BOSPACE.util={_init:function(){for(var _arry=["Arguments","Array","Boolean","Date","Error","Function","JSON","Math","Number","Object","RegExp","String"],i=0,l=_arry.length;l>i;i++){var _functionName="is"+_arry[i];eval("BOSPACE['"+_functionName+"'] = function(data){return Object.prototype.toString.call(data) == '[object "+_arry[i]+"]'}")}}(),ajax:function(e){if(!BOSPACE.isObject(e))throw"Ajax arguments is not object!";$.ajax({type:e.type||"GET",url:e.url,async:e.async||!0,data:e.data||{},beforeSend:e.before||function(){},success:e.success||function(){},error:e.error||function(){}})}},function(e){var t={addEventListener:function(e){e.on("submit",r.formSubmit),e.on("input blur","[data-vilidate]",r.input)}},r={input:function(e){var t=$(this).parents("form"),r=t.attr("action"),n=e.type,a=$(this);i.ready(a,function(e,t){e?("input"==n&&BOSPACE.eventCenter.fire(r+"_inputSuccess",a),"blur"!=n&&"focusout"!=n||BOSPACE.eventCenter.fire(r+"_blurSuccess",a)):("input"==n&&BOSPACE.eventCenter.fire(r+"_inputError",a,t),"blur"!=n&&"focusout"!=n||BOSPACE.eventCenter.fire(r+"_blurError",a,t))})},formSubmit:function(e){var t=$(this),r=t.attr("role"),n=t.attr("method"),a=t.attr("action"),u=!1;if($("[data-vilidate]").each(function(e,t){var r=$(t),n=!1;i.ready(r,function(e,t,i){return e?(BOSPACE.eventCenter.fire(a+"_inputSuccess",r),BOSPACE.eventCenter.fire(a+"_blurSuccess",r),u=!0,n=!0,void 0):(BOSPACE.eventCenter.fire(a+"_inputError",r,t),BOSPACE.eventCenter.fire(a+"_blurError",r,t),u=!1,void(n=!1))}),n}),!u)return!1;if("ajaxform"!=r)return!0;e.preventDefault();var o=t.serialize();$$.util.ajax({url:a,type:n,data:o,success:function(e){BOSPACE.eventCenter.fire(a+"_success",e)},error:function(e,t,r){BOSPACE.eventCenter.fire(a+"_error",e,t,r)}})}},n={listener:function(e,r){var n=$('[action="'+e+'"]');n&&n.length&&(t.addEventListener(n),r.success&&BOSPACE.eventCenter.addEventListener(e+"_success",function(e,t){r.success.apply(t,[e])}),r.error&&BOSPACE.eventCenter.addEventListener(e+"_error",function(e,t){r.error.apply(t,[e])}),r.vilidateBlurSuccess&&BOSPACE.eventCenter.addEventListener(e+"_blurSuccess",function(e){r.vilidateBlurSuccess.apply({},[e])}),r.vilidateBlurError&&BOSPACE.eventCenter.addEventListener(e+"_blurError",function(e,t){r.vilidateBlurError.apply({},[e,t])}),r.vilidateInputSuccess&&BOSPACE.eventCenter.addEventListener(e+"_inputSuccess",function(e){r.vilidateInputSuccess.apply({},[e])}),r.vilidateInputError&&BOSPACE.eventCenter.addEventListener(e+"_inputError",function(e,t){r.vilidateInputError.apply({},[e,t])}))}},i={ready:function(e,t){var r=e.data("vilidate"),n=e.data("verrormsg"),a=e.data("vtype"),u=i.vType,o=e.val();r=r&&r.indexOf("|")>-1?r.split("|"):[r],n=n&&n.indexOf("|")>-1?n.split("|"):[n],a=a&&a.indexOf("|")>-1?a.split("|"):[a],r&&r.forEach(function(i,c){a=a&&a.length>=r.length?a[c]:"",a=a||u[i]||"";var s=new RegExp(a);s.test(o)?t(!0,"",e):t(!1,n[c],e)})},vType:{number:/^\d*$/,phone:/^0?(13|14|15|17|18)[0-9]{9}$/,zh:/^[\u4e00-\u9fa5]$/,email:/^\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/,url:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+$/}},a=function(){};a.prototype.listener=function(e,t){return new n.listener(e,t)},e.formMod=new a}(window.BOSPACE?window.BOSPACE:window.BOSPACE={});